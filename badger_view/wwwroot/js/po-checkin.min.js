function isNumber(n){n=n?n:window.event;var t=n.which?n.which:n.keyCode,i=n.ctrlKey||n.metaKey;return i&&(t==65||t==17||t==86||t==67||t==88)?!0:t>31&&t!=37&&t!=39&&t!=46&&(t<48||t>57)&&(t<96||t>105)?!1:blockspecialcharacter(n)}function blockspecialcharacter(n){let i=n.key,t=i.charCodeAt(0);return t==32?i:t>=48&&t<=57?i:t>=96&&t<=105?i:t>=65&&t<=90?i:t>=97&&t<=122?i:!1}function isEmail(n){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(n)}function onlyNumbersWithDot(n){var t,i;return(n.keyCode>0?t=n.which||n.keyCode:typeof n.charCode!="undefined"&&(t=n.which||n.keyCode),i=n.ctrlKey||n.metaKey,i&&(t==65||t==17||t==86||t==67||t==88))?!0:t==46?!0:t==190?!0:t==110?!0:t>31&&t!=37&&t!=39&&(t<48||t>57)&&(t<96||t>105)||t==16?!1:blockspecialcharacter(n)}function onlyNumbers(n){var t;return(n.keyCode>0?t=n.which||n.keyCode:typeof n.charCode!="undefined"&&(t=n.which||n.keyCode),n.ctrlKey==!0&&(t==65||t==17||t==86||t==67||t==88))?!0:t==46?!0:t==190?!0:t>31&&t!=37&&t!=39&&(t<48||t>57)&&(t<96||t>105)||t==16?!1:!0}function allLetterAllow(n){var t=n.which,i=n.ctrlKey||n.metaKey;return i&&(t==65||t==17||t==86||t==67||t==88)||t==9?!0:!(t>=65&&t<=120)&&t!=32&&t!=0&&t!=8&&t!=37&&t!=39?!1:void 0}function alertBox(n,t,i,r){var u,f;$(".alert").remove();u="success";t=="red"&&(u="danger");f='<div style="z-index: 9999;width: 30%;left: 0;position: fixed;right: 0;margin: 0 auto;top: 10%;" class="alert alert-'+u+' alert-dismissible"><a href="#" class="close" data-dismiss="alert" aria-label="close">&times;<\/a>'+i+"<\/div>";$("."+n).html("");$("body").append(f);setTimeout(function(){$(".alert").remove()},r?r:3e3)}function alertInnerBox(n,t,i){var r="success",u;t=="red"&&(r="danger");u='<div style="z-index: 9999;width: 30%;left: 0;position: absolute;right: 0;margin: 0 auto;top: 10%;" class="alert alert-'+r+' alert-dismissible"><a href="#" class="close" data-dismiss="alert" aria-label="close">&times;<\/a>'+i+"<\/div>";$("."+n).html("");$("."+n).append(u);setTimeout(function(){$(".alert").remove()},3e3)}function confirmationAlertBox(n,t,i){var r='<div style="z-index: 9999;width: 30%;left: 0;position: absolute;right: 0;margin: 0 auto;top: 10%;" role="alert" class="alert alert-success confirmationBox"><h4 class="alert-heading">'+n+"<\/h4><p>"+t+'<\/p><hr><p style="text-align:right;" class="mb-0"><button type="button" style="margin-right: 10px;" data-val="yes" class="confirmDialog btn btn-success">Yes<\/button><button type="button" data-val="no" class="confirmDialog btn btn-success">No<\/button><\/p><\/div>';$("body").prepend(r);$(".confirmDialog").click(function(){return $(".confirmationBox").remove(),$(this).attr("data-val")=="yes"?i("yes"):i("no")})}function confirmationAlertInnerBox(n,t,i){var r='<div style="z-index: 9999;width: 50%;left: 0;position: absolute;right: 0;margin: 0 auto;top: 10%;" role="alert" class="alert alert-success confirmationBox"><h4 class="alert-heading">'+n+"<\/h4><p>"+t+'<\/p><hr><p style="text-align:right;" class="mb-0"><button type="button" style="margin-right: 10px;" data-val="yes" class="confirmDialog btn btn-success">Yes<\/button><button type="button" data-val="no" class="confirmDialog btn btn-success">No<\/button><\/p><\/div>';$(".msg").prepend(r);$(".confirmDialog").click(function(){return $(".confirmationBox").remove(),$(this).attr("data-val")=="yes"?i("yes"):i("no")})}function confirmationBox(n,t,i,r){var u='<div style="z-index: 9999;width: 30%;left: 0;position: absolute;right: 0;margin: 0 auto;top: 10%;" role="alert" class="alert alert-success confirmationBox"><h4 class="alert-heading">'+t+"<\/h4><p>"+i+'<\/p><hr><p style="text-align:right;" class="mb-0"><button type="button" style="margin-right: 10px;" data-val="yes" class="confirmDialog btn btn-success">Yes<\/button><button type="button" data-val="no" class="confirmDialog btn btn-success">No<\/button><\/p><\/div>';$("#collapseOne"+n).prepend(u);$(".confirmDialog").click(function(){return $(".confirmationBox").remove(),$(this).attr("data-val")=="yes"?r("yes"):r("no")})}function emptyFeildValidation(n){$(".errorMsg").remove();var t=!0,i=!0;return $("#"+n+" .required").removeClass("errorFeild"),$("#"+n+" .required:visible").each(function(){$(this).val()==""&&(t=!1,$(this).addClass("errorFeild"),$(this).parents(".form-group").find(".errorMsg").length==0&&$(this).parents(".form-group").append('<span class="errorMsg" style="color:red;font-size: 11px;">this field is required<\/span>'));t&&$(this).attr("type")=="email"&&isEmail($(this).val())==!1&&($(this).parents(".form-group").append('<span class="errorMsg" style="color:red;font-size: 11px;">enter valid email<\/span>'),i=!1)}),i==!1&&(t=!1),$("#"+n+" .errorFeild").length>0&&(t=!1),t}function checkClothingSkuPattern(){return new RegExp("^[a-zA-Z]+[0-9]{3}-{1}[0-9]+$")}function get_all_notes_by_ids(n){n!=""&&$.ajax({url:"/purchaseorders/getitemnotes/"+n,dataType:"json",type:"Get",contentType:"application/json"}).always(function(n){console.log(n);n.length>0&&$(n).each(function(n,t){$(".item_note").each(function(){$(this).attr("data-itemid")==t.ref_id&&$(this).val(t.note)})})})}function getPOdetail(n){$("#collapse_"+n).html('<div style="width:100%;height: 100px;z-index: 999; text-align:center;"><div class= "spinner-border" role = "status" style = " " ><span class="sr-only">Loading...<\/span><\/div><\/div>');$.ajax({url:"/PurchaseOrders/lineitemsdetails/"+n,type:"get",contentType:"application/json",processData:!1}).always(function(t){$("#collapse_"+n).html("");$("#collapse_"+n).html(t);get_all_notes_by_ids(n)})}function getPurchaseOrdersItemdetails(n){$("#collapse_"+n).html('<div style="width:100%;height: 100px;z-index: 999; text-align:center;"><div class= "spinner-border" role = "status" style = " " ><span class="sr-only">Loading...<\/span><\/div><\/div>').show();$.ajax({url:"/PurchaseOrders/itemsdetails/"+n,type:"get",contentType:"application/json",processData:!1}).always(function(t){$("#collapse_"+n).html("");$("#collapse_"+n).html(t);get_all_notes_by_ids(n);$(".POListCheckIn .card .collapse").each(function(){var n=$(this).attr("id").replace("collapseOne","-"),t="";$(".item_sizes").each(function(){$(this).attr("data-orderproduct")==n&&$(this).text()!="0"&&(t+=$(this).attr("data-size")+" ("+$(this).text()+") ")});$(".size"+n).text(t)});$(".po_tble_list tbody tr").each(function(){$(this).attr("data-weight")==0&&$("#sku_weight").removeClass("btn-primary").addClass("btn-success").text("ADD WEIGHT")});$(".item_sku").each(function(){$(this).val().indexOf("-")==-1&&$(this).attr("disabled",!0)})})}function StartConnection(){connection.start().then(function(){ToggleClaim(!1)}).catch(function(n){console.error(n.toString());RestartConnection()})}function RestartConnection(){try{connection.onclose(function(){connection.receivedHandshakeResponse?(console.log("restarting connection...."),ToggleClaim(!0),setTimeout(function(){StartConnection()},5e3)):ToggleClaim(!0)})}catch(n){console.error(err);ToggleClaim(!0)}}function BindInspectClaimHtml(n){var i=n.generate_label==!1?"":"<b>Inspect<\/b><br />",r='style="background-color:'+n.inspect_claim_color+';color:#fff;border-color:gray"',t=i+'<button type="button" class="btn btn-link btn-sm claim" id="claim-inspect-btn" onclick="Claim(undefined,'+claimerType.InspectClaimer+","+n.generate_label+')">Claim<\/button>';n.inspect_claimer>0&&(t=i+'<button type="button" class="btn btn-sm remove-claim" '+r+' onclick="RemoveClaim(undefined,'+claimerType.InspectClaimer+","+n.generate_label+')" id="remove-claim-inspect-btn"> <span style = "padding:inherit">'+n.inspect_claimer_name+'<\/span> <span class="fa fa-times"><\/span><\/button >',$("#inspect-claim").remove("#claim-inspect-btn"));$("#inspect-claim").remove("#remove-claim-inspect-btn");try{t=t.replace("undefined",n.po_id);document.getElementById("inspect-claim-"+n.po_id).innerHTML=t}catch(u){document.getElementById("inspect-claim").innerHTML=t}}function BindPublishClaimHtml(n){var i=n.generate_label==!1?"":"<b>Go Live<\/b><br />",r='style="background-color:'+n.publish_claim_color+';color:#fff;border-color:gray"',t=i+'<button type="button" class="btn btn-link btn-sm claim" id="claim-publsih-btn" onclick="Claim(undefined,'+claimerType.PublishClaimer+","+n.generate_label+')">Claim<\/button>';n.publish_claimer>0&&(t=i+'<button type="button" class="btn btn-sm remove-claim"'+r+' onclick="RemoveClaim(undefined,'+claimerType.PublishClaimer+","+n.generate_label+')" id="remove-claim-publish-btn"> <span style = "padding:inherit">'+n.publish_claimer_name+'<\/span> <span class="fa fa-times"><\/span><\/button >',$("#publish-claim").remove("#claim-publish-btn"));$("#publish-claim").remove("#remove-claim-publish-btn");try{t=t.replace("undefined",n.po_id);document.getElementById("publish-claim-"+n.po_id).innerHTML=t}catch(u){document.getElementById("publish-claim").innerHTML=t}}function Claim(n,t,i){var r=n<1?$("#poId").val():n;$.ajax({url:"/purchaseorders/claim/",type:"POST",contentType:"application/json",data:JSON.stringify({po_id:r,claim_type:t}),beforeSend:function(){ToggleClaim(!0)},success:function(n){console.log("remove claim label: "+i);PushNotifyClaim(n,i);ToggleClaim(!1)},error:function(n){alert("error: updating claim");console.log(n)},complete:function(){}})}function RemoveClaim(n,t,i){var r=n<1?$("#poId").val():n;$.ajax({url:"/purchaseorders/removeclaim/",type:"POST",contentType:"application/json",data:JSON.stringify({po_id:r,claim_type:t}),beforeSend:function(){ToggleClaim(!0)},success:function(n){console.log("remove claim label: "+i);PushNotifyClaim(n,i);ToggleClaim(!1)},error:function(n){alert("error: removing claim");console.log(n)}})}function LoadClaim(){var n=$("#poId").val();$.ajax({url:"/purchaseorders/loadclaim/"+n,type:"GET",contentType:"application/json",success:function(n){console.log(n);BindInspectClaimHtml(n);BindPublishClaimHtml(n);connection.connectionState!=1&&ToggleClaim(!0)},error:function(n){console.log(n)}})}function ToggleClaim(n){n?($(".claim").prop("disabled",n),$(".claim").addClass("disabled"),$(".remove-claim").prop("disabled",n),$(".remove-claim").addClass("disabled")):($(".claim").prop("disabled",n),$(".claim").removeClass("disabled"),$(".remove-claim").prop("disabled",n),$(".remove-claim").removeClass("disabled"))}function PushNotifyClaim(n,t){n.generate_label=t;connection.invoke("SendClaim",n).catch(function(n){return console.error(n.toString())})}function pagination(n,t,i){return{total:n,per_page:i,current_page:t,last_page:Math.ceil(n/i),from:(t-1)*i+1,to:t*i}}function pageNumbers(n,t,i){var r=Math.ceil(n/i),u=[];return t>r-3?u.push(r-2,r-1,r):u.push(t,t+1,t+2,"...",r),u}var connection,total,currentPage,currentPageNumber,pagenumberData,textData;(function(n,t){typeof exports=="object"&&typeof module=="object"?module.exports=t():typeof define=="function"&&define.amd?define([],t):typeof exports=="object"?exports.signalR=t():n.signalR=t()})(window,function(){return function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={i:r,l:!1,exports:{}};return n[r].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var i={};return t.m=n,t.c=i,t.d=function(n,i,r){t.o(n,i)||Object.defineProperty(n,i,{enumerable:!0,get:r})},t.r=function(n){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,i){var r,u;if((i&1&&(n=t(n)),i&8)||i&4&&typeof n=="object"&&n&&n.__esModule)return n;if(r=Object.create(null),t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),i&2&&typeof n!="string")for(u in n)t.d(r,u,function(t){return n[t]}.bind(null,u));return r},t.n=function(n){var i=n&&n.__esModule?function(){return n["default"]}:function(){return n};return t.d(i,"a",i),i},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=0)}([function(n,t,i){"use strict";i.r(t);var u=i(1),f=i.n(u),r=i(3);i.d(t,"VERSION",function(){return r.VERSION});i.d(t,"AbortError",function(){return r.AbortError});i.d(t,"HttpError",function(){return r.HttpError});i.d(t,"TimeoutError",function(){return r.TimeoutError});i.d(t,"HttpClient",function(){return r.HttpClient});i.d(t,"HttpResponse",function(){return r.HttpResponse});i.d(t,"DefaultHttpClient",function(){return r.DefaultHttpClient});i.d(t,"HubConnection",function(){return r.HubConnection});i.d(t,"HubConnectionState",function(){return r.HubConnectionState});i.d(t,"HubConnectionBuilder",function(){return r.HubConnectionBuilder});i.d(t,"MessageType",function(){return r.MessageType});i.d(t,"LogLevel",function(){return r.LogLevel});i.d(t,"HttpTransportType",function(){return r.HttpTransportType});i.d(t,"TransferFormat",function(){return r.TransferFormat});i.d(t,"NullLogger",function(){return r.NullLogger});i.d(t,"JsonHubProtocol",function(){return r.JsonHubProtocol});Uint8Array.prototype.indexOf||Object.defineProperty(Uint8Array.prototype,"indexOf",{value:Array.prototype.indexOf,writable:!0});Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice,writable:!0});Uint8Array.prototype.forEach||Object.defineProperty(Uint8Array.prototype,"forEach",{value:Array.prototype.forEach,writable:!0})},function(n,t,i){(function(t){var r;
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.2+97478eb6
 */
(function(t,i){n.exports=i()})(this,function(){"use strict";function kt(n){var t=typeof n;return n!==null&&(t==="object"||t==="function")}function et(n){return typeof n=="function"}function dt(n){d=n}function gt(n){e=n}function ii(){return function(){return process.nextTick(h)}}function ri(){return typeof k!="undefined"?function(){k(h)}:g()}function ui(){var n=0,i=new lt(h),t=document.createTextNode("");return i.observe(t,{characterData:!0}),function(){t.data=n=++n%2}}function fi(){var n=new MessageChannel;return n.port1.onmessage=h,function(){return n.port2.postMessage(0)}}function g(){var n=setTimeout;return function(){return n(h,1)}}function h(){for(var t,i,n=0;n<s;n+=2)t=o[n],i=o[n+1],t(i),o[n]=undefined,o[n+1]=undefined;s=0}function ei(){try{var t=r,n=i(!function(){var n=new Error("Cannot find module 'vertx'");n.code="MODULE_NOT_FOUND";throw n;}());return k=n.runOnLoop||n.runOnContext,ri()}catch(f){return g()}}function tt(n,t){var u=this,i=new this.constructor(c),r,f;return i[v]===undefined&&wt(i),r=u._state,r?(f=arguments[r-1],e(function(){return pt(r,i,f,u._result)})):rt(u,i,n,t),i}function it(n){var i=this,t;return n&&typeof n=="object"&&n.constructor===i?n:(t=new i(c),w(t,n),t)}function c(){}function oi(){return new TypeError("You cannot resolve a promise with itself")}function si(){return new TypeError("A promises callback cannot return that same promise.")}function at(n){try{return n.then}catch(t){return p.error=t,p}}function hi(n,t,i,r){try{n.call(t,i,r)}catch(u){return u}}function ci(n,t,i){e(function(n){var r=!1,e=hi(i,t,function(i){r||(r=!0,t!==i?w(n,i):f(n,i))},function(t){r||(r=!0,u(n,t))},"Settle: "+(n._label||" unknown promise"));!r&&e&&(r=!0,u(n,e))},n)}function li(n,t){t._state===y?f(n,t._result):t._state===a?u(n,t._result):rt(t,undefined,function(t){return w(n,t)},function(t){return u(n,t)})}function vt(n,t,i){t.constructor===n.constructor&&i===tt&&t.constructor.resolve===it?li(n,t):i===p?(u(n,p.error),p.error=null):i===undefined?f(n,t):et(i)?ci(n,t,i):f(n,t)}function w(n,t){n===t?u(n,oi()):kt(t)?vt(n,t,at(t)):f(n,t)}function ai(n){n._onerror&&n._onerror(n._result);ut(n)}function f(n,t){n._state===l&&(n._result=t,n._state=y,n._subscribers.length!==0&&e(ut,n))}function u(n,t){n._state===l&&(n._state=a,n._result=t,e(ai,n))}function rt(n,t,i,r){var u=n._subscribers,f=u.length;n._onerror=null;u[f]=t;u[f+y]=i;u[f+a]=r;f===0&&n._state&&e(ut,n)}function ut(n){var i=n._subscribers,f=n._state,t;if(i.length!==0){var r=void 0,u=void 0,e=n._result;for(t=0;t<i.length;t+=3)r=i[t],u=i[t+f],r?pt(f,r,u,e):u(e);n._subscribers.length=0}}function yt(){this.error=null}function vi(n,t){try{return n(t)}catch(i){return b.error=i,b}}function pt(n,t,i,r){var s=et(i),e=void 0,h=void 0,o=void 0,c=void 0;if(s){if(e=vi(i,r),e===b?(c=!0,h=e.error,e.error=null):o=!0,t===e){u(t,si());return}}else e=r,o=!0;t._state!==l||(s&&o?w(t,e):c?u(t,h):n===y?f(t,e):n===a&&u(t,e))}function yi(n,t){try{t(function(t){w(n,t)},function(t){u(n,t)})}catch(i){u(n,i)}}function pi(){return ft++}function wt(n){n[v]=ft++;n._state=undefined;n._result=undefined;n._subscribers=[]}function wi(){return new Error("Array Methods must be provided an Array")}function wi(){return new Error("Array Methods must be provided an Array")}function bi(n){return new bt(this,n).promise}function ki(n){var t=this;return st(n)?new t(function(i,r){for(var f=n.length,u=0;u<f;u++)t.resolve(n[u]).then(i,r)}):new t(function(n,t){return t(new TypeError("You must pass an array to race."))})}function di(n){var i=this,t=new i(c);return u(t,n),t}function gi(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");}function nr(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}function tr(){var i=void 0,r,u;if(typeof t!="undefined")i=t;else if(typeof self!="undefined")i=self;else try{i=Function("return this")()}catch(f){throw new Error("polyfill failed because global object is unavailable in this environment");}if(r=i.Promise,r){u=null;try{u=Object.prototype.toString.call(r.resolve())}catch(f){}if(u==="[object Promise]"&&!r.cast)return}i.Promise=n}var ot=void 0,o,nt,v,b,ft,bt,n;ot=Array.isArray?Array.isArray:function(n){return Object.prototype.toString.call(n)==="[object Array]"};var st=ot,s=0,k=void 0,d=void 0,e=function(n,t){o[s]=n;o[s+1]=t;s+=2;s===2&&(d?d(h):nt())};var ht=typeof window!="undefined"?window:undefined,ct=ht||{},lt=ct.MutationObserver||ct.WebKitMutationObserver,ni=typeof self=="undefined"&&typeof process!="undefined"&&{}.toString.call(process)==="[object process]",ti=typeof Uint8ClampedArray!="undefined"&&typeof importScripts!="undefined"&&typeof MessageChannel!="undefined";o=new Array(1e3);nt=void 0;nt=ni?ii():lt?ui():ti?fi():ht===undefined&&!0?ei():g();v=Math.random().toString(36).substring(16);var l=void 0,y=1,a=2,p=new yt;return b=new yt,ft=0,bt=function(){function t(n,t){this._instanceConstructor=n;this.promise=new n(c);this.promise[v]||wt(this.promise);st(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),this.length===0?f(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),this._remaining===0&&f(this.promise,this._result))):u(this.promise,wi())}return t.prototype._enumerate=function(n){for(var t=0;this._state===l&&t<n.length;t++)this._eachEntry(n[t],t)},t.prototype._eachEntry=function(t,i){var r=this._instanceConstructor,e=r.resolve,u,f;e===it?(u=at(t),u===tt&&t._state!==l?this._settledAt(t._state,i,t._result):typeof u!="function"?(this._remaining--,this._result[i]=t):r===n?(f=new r(c),vt(f,t,u),this._willSettleAt(f,i)):this._willSettleAt(new r(function(n){return n(t)}),i)):this._willSettleAt(e(t),i)},t.prototype._settledAt=function(n,t,i){var r=this.promise;r._state===l&&(this._remaining--,n===a?u(r,i):this._result[t]=i);this._remaining===0&&f(r,this._result)},t.prototype._willSettleAt=function(n,t){var i=this;rt(n,undefined,function(n){return i._settledAt(y,t,n)},function(n){return i._settledAt(a,t,n)})},t}(),n=function(){function n(t){this[v]=pi();this._result=this._state=undefined;this._subscribers=[];c!==t&&(typeof t!="function"&&gi(),this instanceof n?yi(this,t):nr())}return n.prototype.catch=function(n){return this.then(null,n)},n.prototype.finally=function(n){var t=this,i=t.constructor;return t.then(function(t){return i.resolve(n()).then(function(){return t})},function(t){return i.resolve(n()).then(function(){throw t;})})},n}(),n.prototype.then=tt,n.all=bi,n.race=ki,n.resolve=it,n.reject=di,n._setScheduler=dt,n._setAsap=gt,n._asap=e,n.polyfill=tr,n.Promise=n,n.polyfill(),n})}).call(this,i(2))},function(n){var t=function(){return this}();try{t=t||Function("return this")()||(1,eval)("this")}catch(i){typeof window=="object"&&(t=window)}n.exports=t},function(n,t,i){"use strict";var r,u,o,f,s,h,c,e,l,a,v;i.r(t);i.d(t,"VERSION",function(){return v});r=i(4);i.d(t,"AbortError",function(){return r.AbortError});i.d(t,"HttpError",function(){return r.HttpError});i.d(t,"TimeoutError",function(){return r.TimeoutError});u=i(5);i.d(t,"HttpClient",function(){return u.HttpClient});i.d(t,"HttpResponse",function(){return u.HttpResponse});o=i(6);i.d(t,"DefaultHttpClient",function(){return o.DefaultHttpClient});f=i(10);i.d(t,"HubConnection",function(){return f.HubConnection});i.d(t,"HubConnectionState",function(){return f.HubConnectionState});s=i(16);i.d(t,"HubConnectionBuilder",function(){return s.HubConnectionBuilder});h=i(15);i.d(t,"MessageType",function(){return h.MessageType});c=i(9);i.d(t,"LogLevel",function(){return c.LogLevel});e=i(18);i.d(t,"HttpTransportType",function(){return e.HttpTransportType});i.d(t,"TransferFormat",function(){return e.TransferFormat});l=i(14);i.d(t,"NullLogger",function(){return l.NullLogger});a=i(23);i.d(t,"JsonHubProtocol",function(){return a.JsonHubProtocol});v="1.1.4"},function(n,t,i){"use strict";i.r(t);i.d(t,"HttpError",function(){return u});i.d(t,"TimeoutError",function(){return f});i.d(t,"AbortError",function(){return e});var r=undefined&&undefined.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),u=function(n){function t(t,i){var u=this.constructor,r=this,f=u.prototype;return r=n.call(this,t)||this,r.statusCode=i,r.__proto__=f,r}return r(t,n),t}(Error),f=function(n){function t(t){var u=this.constructor,i,r;return t===void 0&&(t="A timeout occurred."),i=this,r=u.prototype,i=n.call(this,t)||this,i.__proto__=r,i}return r(t,n),t}(Error),e=function(n){function t(t){var u=this.constructor,i,r;return t===void 0&&(t="An abort occurred."),i=this,r=u.prototype,i=n.call(this,t)||this,i.__proto__=r,i}return r(t,n),t}(Error)},function(n,t,i){"use strict";i.r(t);i.d(t,"HttpResponse",function(){return u});i.d(t,"HttpClient",function(){return f});var r=undefined&&undefined.__assign||Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},u=function(){function n(n,t,i){this.statusCode=n;this.statusText=t;this.content=i}return n}(),f=function(){function n(){}return n.prototype.get=function(n,t){return this.send(r({},t,{method:"GET",url:n}))},n.prototype.post=function(n,t){return this.send(r({},t,{method:"POST",url:n}))},n.prototype.delete=function(n,t){return this.send(r({},t,{method:"DELETE",url:n}))},n.prototype.getCookieString=function(){return""},n}()},function(n,t,i){"use strict";i.r(t);i.d(t,"DefaultHttpClient",function(){return s});var r=i(4),u=i(5),f=i(7),e=i(8),o=undefined&&undefined.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),s=function(n){function t(t){var i=n.call(this)||this;return i.httpClient=typeof XMLHttpRequest!="undefined"?new e.XhrHttpClient(t):new f.NodeHttpClient(t),i}return o(t,n),t.prototype.send=function(n){return n.abortSignal&&n.abortSignal.aborted?Promise.reject(new r.AbortError):n.method?n.url?this.httpClient.send(n):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},t.prototype.getCookieString=function(n){return this.httpClient.getCookieString(n)},t}(u.HttpClient)},function(n,t,i){"use strict";i.r(t);i.d(t,"NodeHttpClient",function(){return f});var r=i(5),u=undefined&&undefined.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),f=function(n){function t(){return n.call(this)||this}return u(t,n),t.prototype.send=function(){return Promise.reject(new Error("If using Node either provide an XmlHttpRequest polyfill or consume the cjs or esm script instead of the browser/signalr.js one."))},t}(r.HttpClient)},function(n,t,i){"use strict";i.r(t);i.d(t,"XhrHttpClient",function(){return o});var r=i(4),u=i(5),f=i(9),e=undefined&&undefined.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),o=function(n){function t(t){var i=n.call(this)||this;return i.logger=t,i}return e(t,n),t.prototype.send=function(n){var t=this;return n.abortSignal&&n.abortSignal.aborted?Promise.reject(new r.AbortError):n.method?n.url?new Promise(function(i,e){var o=new XMLHttpRequest,s;o.open(n.method,n.url,!0);o.withCredentials=!0;o.setRequestHeader("X-Requested-With","XMLHttpRequest");o.setRequestHeader("Content-Type","text/plain;charset=UTF-8");s=n.headers;s&&Object.keys(s).forEach(function(n){o.setRequestHeader(n,s[n])});n.responseType&&(o.responseType=n.responseType);n.abortSignal&&(n.abortSignal.onabort=function(){o.abort();e(new r.AbortError)});n.timeout&&(o.timeout=n.timeout);o.onload=function(){n.abortSignal&&(n.abortSignal.onabort=null);o.status>=200&&o.status<300?i(new u.HttpResponse(o.status,o.statusText,o.response||o.responseText)):e(new r.HttpError(o.statusText,o.status))};o.onerror=function(){t.logger.log(f.LogLevel.Warning,"Error from HTTP request. "+o.status+": "+o.statusText+".");e(new r.HttpError(o.statusText,o.status))};o.ontimeout=function(){t.logger.log(f.LogLevel.Warning,"Timeout from HTTP request.");e(new r.TimeoutError)};o.send(n.content||"")}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},t}(u.HttpClient)},function(n,t,i){"use strict";i.r(t);i.d(t,"LogLevel",function(){return r});var r;(function(n){n[n.Trace=0]="Trace";n[n.Debug=1]="Debug";n[n.Information=2]="Information";n[n.Warning=3]="Warning";n[n.Error=4]="Error";n[n.Critical=5]="Critical";n[n.None=6]="None"})(r||(r={}))},function(n,t,i){"use strict";var h;i.r(t);i.d(t,"HubConnectionState",function(){return f});i.d(t,"HubConnection",function(){return h});var c=i(11),r=i(15),u=i(9),e=i(13),o=undefined&&undefined.__awaiter||function(n,t,i,r){return new(i||(i=Promise))(function(u,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?u(n.value):new i(function(t){t(n.value)}).then(o,s)}e((r=r.apply(n,t||[])).next())})},s=undefined&&undefined.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e},l=3e4,a=15e3,f;(function(n){n[n.Disconnected=0]="Disconnected";n[n.Connected=1]="Connected"})(f||(f={}));h=function(){function n(n,t,i){var u=this;e.Arg.isRequired(n,"connection");e.Arg.isRequired(t,"logger");e.Arg.isRequired(i,"protocol");this.serverTimeoutInMilliseconds=l;this.keepAliveIntervalInMilliseconds=a;this.logger=t;this.protocol=i;this.connection=n;this.handshakeProtocol=new c.HandshakeProtocol;this.connection.onreceive=function(n){return u.processIncomingData(n)};this.connection.onclose=function(n){return u.connectionClosed(n)};this.callbacks={};this.methods={};this.closedCallbacks=[];this.id=0;this.receivedHandshakeResponse=!1;this.connectionState=f.Disconnected;this.cachedPingMessage=this.protocol.writeMessage({type:r.MessageType.Ping})}return n.create=function(t,i,r){return new n(t,i,r)},Object.defineProperty(n.prototype,"state",{get:function(){return this.connectionState},enumerable:!0,configurable:!0}),n.prototype.start=function(){return o(this,void 0,void 0,function(){var n,t,i=this;return s(this,function(r){switch(r.label){case 0:return n={protocol:this.protocol.name,version:this.protocol.version},this.logger.log(u.LogLevel.Debug,"Starting HubConnection."),this.receivedHandshakeResponse=!1,t=new Promise(function(n,t){i.handshakeResolver=n;i.handshakeRejecter=t}),[4,this.connection.start(this.protocol.transferFormat)];case 1:return r.sent(),this.logger.log(u.LogLevel.Debug,"Sending handshake request."),[4,this.sendMessage(this.handshakeProtocol.writeHandshakeRequest(n))];case 2:return r.sent(),this.logger.log(u.LogLevel.Information,"Using HubProtocol '"+this.protocol.name+"'."),this.cleanupTimeout(),this.resetTimeoutPeriod(),this.resetKeepAliveInterval(),[4,t];case 3:return r.sent(),this.connectionState=f.Connected,[2]}})})},n.prototype.stop=function(){return this.logger.log(u.LogLevel.Debug,"Stopping HubConnection."),this.cleanupTimeout(),this.cleanupPingTimer(),this.connection.stop()},n.prototype.stream=function(n){for(var i,s,t,h,u=this,o=[],f=1;f<arguments.length;f++)o[f-1]=arguments[f];return i=this.createStreamInvocation(n,o),t=new e.Subject,t.cancelCallback=function(){var n=u.createCancelInvocation(i.invocationId),t=u.protocol.writeMessage(n);return delete u.callbacks[i.invocationId],s.then(function(){return u.sendMessage(t)})},this.callbacks[i.invocationId]=function(n,i){if(i){t.error(i);return}n&&(n.type===r.MessageType.Completion?n.error?t.error(new Error(n.error)):t.complete():t.next(n.item))},h=this.protocol.writeMessage(i),s=this.sendMessage(h).catch(function(n){t.error(n);delete u.callbacks[i.invocationId]}),t},n.prototype.sendMessage=function(n){return this.resetKeepAliveInterval(),this.connection.send(n)},n.prototype.send=function(n){for(var r,u,i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];return r=this.createInvocation(n,i,!0),u=this.protocol.writeMessage(r),this.sendMessage(u)},n.prototype.invoke=function(n){for(var u,e,t=this,f=[],i=1;i<arguments.length;i++)f[i-1]=arguments[i];return u=this.createInvocation(n,f,!1),e=new Promise(function(n,i){t.callbacks[u.invocationId]=function(t,u){if(u){i(u);return}t&&(t.type===r.MessageType.Completion?t.error?i(new Error(t.error)):n(t.result):i(new Error("Unexpected message type: "+t.type)))};var f=t.protocol.writeMessage(u);t.sendMessage(f).catch(function(n){i(n);delete t.callbacks[u.invocationId]})}),e},n.prototype.on=function(n,t){n&&t&&(n=n.toLowerCase(),this.methods[n]||(this.methods[n]=[]),this.methods[n].indexOf(t)===-1)&&this.methods[n].push(t)},n.prototype.off=function(n,t){var i,r;n&&(n=n.toLowerCase(),i=this.methods[n],i)&&(t?(r=i.indexOf(t),r!==-1&&(i.splice(r,1),i.length===0&&delete this.methods[n])):delete this.methods[n])},n.prototype.onclose=function(n){n&&this.closedCallbacks.push(n)},n.prototype.processIncomingData=function(n){var o,i,f,t,e;if(this.cleanupTimeout(),this.receivedHandshakeResponse||(n=this.processHandshakeResponse(n),this.receivedHandshakeResponse=!0),n)for(o=this.protocol.parseMessages(n,this.logger),i=0,f=o;i<f.length;i++){t=f[i];switch(t.type){case r.MessageType.Invocation:this.invokeClientMethod(t);break;case r.MessageType.StreamItem:case r.MessageType.Completion:e=this.callbacks[t.invocationId];e!=null&&(t.type===r.MessageType.Completion&&delete this.callbacks[t.invocationId],e(t));break;case r.MessageType.Ping:break;case r.MessageType.Close:this.logger.log(u.LogLevel.Information,"Close message received from server.");this.connection.stop(t.error?new Error("Server returned an error on close: "+t.error):undefined);break;default:this.logger.log(u.LogLevel.Warning,"Invalid message type: "+t.type+".")}}this.resetTimeoutPeriod()},n.prototype.processHandshakeResponse=function(n){var r,f,e,i,t;try{r=this.handshakeProtocol.parseHandshakeResponse(n);e=r[0];f=r[1]}catch(o){t="Error parsing handshake response: "+o;this.logger.log(u.LogLevel.Error,t);i=new Error(t);this.connection.stop(i);this.handshakeRejecter(i);throw i;}if(f.error){t="Server returned handshake error: "+f.error;this.logger.log(u.LogLevel.Error,t);this.handshakeRejecter(t);this.connection.stop(new Error(t));throw new Error(t);}else this.logger.log(u.LogLevel.Debug,"Server handshake complete.");return this.handshakeResolver(),e},n.prototype.resetKeepAliveInterval=function(){var n=this;this.cleanupPingTimer();this.pingServerHandle=setTimeout(function(){return o(n,void 0,void 0,function(){var n;return s(this,function(t){switch(t.label){case 0:if(!(this.connectionState===f.Connected))return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.sendMessage(this.cachedPingMessage)];case 2:return t.sent(),[3,4];case 3:return n=t.sent(),this.cleanupPingTimer(),[3,4];case 4:return[2]}})})},this.keepAliveIntervalInMilliseconds)},n.prototype.resetTimeoutPeriod=function(){var n=this;this.connection.features&&this.connection.features.inherentKeepAlive||(this.timeoutHandle=setTimeout(function(){return n.serverTimeout()},this.serverTimeoutInMilliseconds))},n.prototype.serverTimeout=function(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))},n.prototype.invokeClientMethod=function(n){var r=this,i=this.methods[n.target.toLowerCase()],t;i?(i.forEach(function(t){return t.apply(r,n.arguments)}),n.invocationId&&(t="Server requested a response, which is not supported in this version of the client.",this.logger.log(u.LogLevel.Error,t),this.connection.stop(new Error(t)))):this.logger.log(u.LogLevel.Warning,"No client method with the name '"+n.target+"' found.")},n.prototype.connectionClosed=function(n){var i=this,t=this.callbacks;this.callbacks={};this.connectionState=f.Disconnected;this.handshakeRejecter&&this.handshakeRejecter(n);Object.keys(t).forEach(function(i){var r=t[i];r(null,n?n:new Error("Invocation canceled due to connection being closed."))});this.cleanupTimeout();this.cleanupPingTimer();this.closedCallbacks.forEach(function(t){return t.apply(i,[n])})},n.prototype.cleanupPingTimer=function(){this.pingServerHandle&&clearTimeout(this.pingServerHandle)},n.prototype.cleanupTimeout=function(){this.timeoutHandle&&clearTimeout(this.timeoutHandle)},n.prototype.createInvocation=function(n,t,i){if(i)return{arguments:t,target:n,type:r.MessageType.Invocation};var u=this.id;return this.id++,{arguments:t,invocationId:u.toString(),target:n,type:r.MessageType.Invocation}},n.prototype.createStreamInvocation=function(n,t){var i=this.id;return this.id++,{arguments:t,invocationId:i.toString(),target:n,type:r.MessageType.StreamInvocation}},n.prototype.createCancelInvocation=function(n){return{invocationId:n,type:r.MessageType.CancelInvocation}},n}()},function(n,t,i){"use strict";i.r(t);i.d(t,"HandshakeProtocol",function(){return f});var r=i(12),u=i(13),f=function(){function n(){}return n.prototype.writeHandshakeRequest=function(n){return r.TextMessageFormat.write(JSON.stringify(n))},n.prototype.parseHandshakeResponse=function(n){var c,o,s,f,e,i,t,l,h;if(Object(u.isArrayBuffer)(n)||typeof Buffer!="undefined"&&n instanceof Buffer){if(f=new Uint8Array(n),i=f.indexOf(r.TextMessageFormat.RecordSeparatorCode),i===-1)throw new Error("Message is incomplete.");t=i+1;o=String.fromCharCode.apply(null,f.slice(0,t));s=f.byteLength>t?f.slice(t).buffer:null}else{if(e=n,i=e.indexOf(r.TextMessageFormat.RecordSeparator),i===-1)throw new Error("Message is incomplete.");t=i+1;o=e.substring(0,t);s=e.length>t?e.substring(t):null}if(l=r.TextMessageFormat.parse(o),h=JSON.parse(l[0]),h.type)throw new Error("Expected a handshake response from the server.");return c=h,[s,c]},n}()},function(n,t,i){"use strict";i.r(t);i.d(t,"TextMessageFormat",function(){return r});var r=function(){function n(){}return n.write=function(t){return""+t+n.RecordSeparator},n.parse=function(t){if(t[t.length-1]!==n.RecordSeparator)throw new Error("Message is incomplete.");var i=t.split(n.RecordSeparator);return i.pop(),i},n.RecordSeparatorCode=30,n.RecordSeparator=String.fromCharCode(n.RecordSeparatorCode),n}()},function(n,t,i){"use strict";function e(n,t){var i="";return u(n)?(i="Binary data of length "+n.byteLength,t&&(i+=". Content: '"+o(n)+"'")):typeof n=="string"&&(i="String data of length "+n.length,t&&(i+=". Content: '"+n+"'")),i}function o(n){var i=new Uint8Array(n),t="";return i.forEach(function(n){var i=n<16?"0":"";t+="0x"+i+n.toString(16)+" "}),t.substr(0,t.length-1)}function u(n){return n&&typeof ArrayBuffer!="undefined"&&(n instanceof ArrayBuffer||n.constructor&&n.constructor.name==="ArrayBuffer")}function v(n,t,i,f,o,s,h){return c(this,void 0,void 0,function(){var c,v,a,y,p;return l(this,function(l){switch(l.label){case 0:return o?[4,o()]:[3,2];case 1:a=l.sent();a&&(v=(c={},c.Authorization="Bearer "+a,c));l.label=2;case 2:return n.log(r.LogLevel.Trace,"("+t+" transport) sending data. "+e(s,h)+"."),y=u(s)?"arraybuffer":"text",[4,i.post(f,{content:s,headers:v,responseType:y})];case 3:return p=l.sent(),n.log(r.LogLevel.Trace,"("+t+" transport) request complete. Response status: "+p.statusCode+"."),[2]}})})}function y(n){return n===undefined?new f(r.LogLevel.Information):n===null?h.NullLogger.instance:n.log?n:new f(n)}i.r(t);i.d(t,"Arg",function(){return a});i.d(t,"getDataDetail",function(){return e});i.d(t,"formatArrayBuffer",function(){return o});i.d(t,"isArrayBuffer",function(){return u});i.d(t,"sendMessage",function(){return v});i.d(t,"createLogger",function(){return y});i.d(t,"Subject",function(){return p});i.d(t,"SubjectSubscription",function(){return s});i.d(t,"ConsoleLogger",function(){return f});var r=i(9),h=i(14),c=undefined&&undefined.__awaiter||function(n,t,i,r){return new(i||(i=Promise))(function(u,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?u(n.value):new i(function(t){t(n.value)}).then(o,s)}e((r=r.apply(n,t||[])).next())})},l=undefined&&undefined.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e},a=function(){function n(){}return n.isRequired=function(n,t){if(n===null||n===undefined)throw new Error("The '"+t+"' argument is required.");},n.isIn=function(n,t,i){if(!(n in t))throw new Error("Unknown "+i+" value: "+n+".");},n}();var p=function(){function n(){this.observers=[]}return n.prototype.next=function(n){for(var r,t=0,i=this.observers;t<i.length;t++)r=i[t],r.next(n)},n.prototype.error=function(n){for(var r,t=0,i=this.observers;t<i.length;t++)r=i[t],r.error&&r.error(n)},n.prototype.complete=function(){for(var i,n=0,t=this.observers;n<t.length;n++)i=t[n],i.complete&&i.complete()},n.prototype.subscribe=function(n){return this.observers.push(n),new s(this,n)},n}(),s=function(){function n(n,t){this.subject=n;this.observer=t}return n.prototype.dispose=function(){var n=this.subject.observers.indexOf(this.observer);n>-1&&this.subject.observers.splice(n,1);this.subject.observers.length===0&&this.subject.cancelCallback&&this.subject.cancelCallback().catch(function(){})},n}(),f=function(){function n(n){this.minimumLogLevel=n}return n.prototype.log=function(n,t){if(n>=this.minimumLogLevel)switch(n){case r.LogLevel.Critical:case r.LogLevel.Error:console.error("["+(new Date).toISOString()+"] "+r.LogLevel[n]+": "+t);break;case r.LogLevel.Warning:console.warn("["+(new Date).toISOString()+"] "+r.LogLevel[n]+": "+t);break;case r.LogLevel.Information:console.info("["+(new Date).toISOString()+"] "+r.LogLevel[n]+": "+t);break;default:console.log("["+(new Date).toISOString()+"] "+r.LogLevel[n]+": "+t)}},n}()},function(n,t,i){"use strict";i.r(t);i.d(t,"NullLogger",function(){return r});var r=function(){function n(){}return n.prototype.log=function(){},n.instance=new n,n}()},function(n,t,i){"use strict";i.r(t);i.d(t,"MessageType",function(){return r});var r;(function(n){n[n.Invocation=1]="Invocation";n[n.StreamItem=2]="StreamItem";n[n.Completion=3]="Completion";n[n.StreamInvocation=4]="StreamInvocation";n[n.CancelInvocation=5]="CancelInvocation";n[n.Ping=6]="Ping";n[n.Close=7]="Close"})(r||(r={}))},function(n,t,i){"use strict";function h(n){return n.log!==undefined}i.r(t);i.d(t,"HubConnectionBuilder",function(){return s});var u=i(17),f=i(10),e=i(23),o=i(14),r=i(13),s=function(){function n(){}return n.prototype.configureLogging=function(n){return r.Arg.isRequired(n,"logging"),this.logger=h(n)?n:new r.ConsoleLogger(n),this},n.prototype.withUrl=function(n,t){return r.Arg.isRequired(n,"url"),this.url=n,this.httpConnectionOptions=typeof t=="object"?t:{transport:t},this},n.prototype.withHubProtocol=function(n){return r.Arg.isRequired(n,"protocol"),this.protocol=n,this},n.prototype.build=function(){var n=this.httpConnectionOptions||{},t;if(n.logger===undefined&&(n.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");return t=new u.HttpConnection(this.url,n),f.HubConnection.create(t,this.logger||o.NullLogger.instance,this.protocol||new e.JsonHubProtocol)},n}()},function(n,t,i){"use strict";function b(n,t){return!n||(t&n)!=0}var c,v;i.r(t);i.d(t,"HttpConnection",function(){return v});var y=i(6),u=i(9),r=i(18),l=i(19),p=i(21),o=i(13),w=i(22),e=undefined&&undefined.__awaiter||function(n,t,i,r){return new(i||(i=Promise))(function(u,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?u(n.value):new i(function(t){t(n.value)}).then(o,s)}e((r=r.apply(n,t||[])).next())})},f=undefined&&undefined.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e},a=100,s=null,h=null;typeof window=="undefined"&&!0&&(c=require,s=c("ws"),h=c("eventsource"));v=function(){function n(n,t){t===void 0&&(t={});this.features={};o.Arg.isRequired(n,"url");this.logger=Object(o.createLogger)(t.logger);this.baseUrl=this.resolveUrl(n);t=t||{};t.logMessageContent=t.logMessageContent||!1;var i=typeof window=="undefined";i||typeof WebSocket=="undefined"||t.WebSocket?i&&!t.WebSocket&&s&&(t.WebSocket=s):t.WebSocket=WebSocket;i||typeof EventSource=="undefined"||t.EventSource?i&&!t.EventSource&&typeof h!="undefined"&&(t.EventSource=h):t.EventSource=EventSource;this.httpClient=t.httpClient||new y.DefaultHttpClient(this.logger);this.connectionState=2;this.options=t;this.onreceive=null;this.onclose=null}return n.prototype.start=function(n){return(n=n||r.TransferFormat.Binary,o.Arg.isIn(n,r.TransferFormat,"transferFormat"),this.logger.log(u.LogLevel.Debug,"Starting connection with transfer format '"+r.TransferFormat[n]+"'."),this.connectionState!==2)?Promise.reject(new Error("Cannot start a connection that is not in the 'Disconnected' state.")):(this.connectionState=0,this.startPromise=this.startInternal(n),this.startPromise)},n.prototype.send=function(n){if(this.connectionState!==1)throw new Error("Cannot send data if the connection is not in the 'Connected' State.");return this.transport.send(n)},n.prototype.stop=function(n){return e(this,void 0,void 0,function(){var t;return f(this,function(i){switch(i.label){case 0:this.connectionState=2;this.stopError=n;i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.startPromise];case 2:return i.sent(),[3,4];case 3:return t=i.sent(),[3,4];case 4:return this.transport?[4,this.transport.stop()]:[3,6];case 5:i.sent();this.transport=undefined;i.label=6;case 6:return[2]}})})},n.prototype.startInternal=function(n){return e(this,void 0,void 0,function(){var i,t,e,c,o,s,h,v=this;return f(this,function(y){switch(y.label){case 0:i=this.baseUrl;this.accessTokenFactory=this.options.accessTokenFactory;y.label=1;case 1:return(y.trys.push([1,12,,13]),!this.options.skipNegotiation)?[3,5]:(this.options.transport===r.HttpTransportType.WebSockets)?(this.transport=this.constructTransport(r.HttpTransportType.WebSockets),[4,this.transport.connect(i,n)]):[3,3];case 2:return y.sent(),[3,4];case 3:throw Error("Negotiation can only be skipped when using the WebSocket transport directly.");case 4:return[3,11];case 5:t=null;e=0;c=function(){var n;return f(this,function(r){switch(r.label){case 0:return[4,o.getNegotiationResponse(i)];case 1:if(t=r.sent(),o.connectionState===2)return[2,{value:void 0}];if(t.error)throw Error(t.error);if(t.ProtocolVersion)throw Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");return t.url&&(i=t.url),t.accessToken&&(n=t.accessToken,o.accessTokenFactory=function(){return n}),e++,[2]}})};o=this;y.label=6;case 6:return[5,c()];case 7:if(s=y.sent(),typeof s=="object")return[2,s.value];y.label=8;case 8:if(t.url&&e<a)return[3,6];y.label=9;case 9:if(e===a&&t.url)throw Error("Negotiate redirection limit exceeded.");return[4,this.createTransport(i,this.options.transport,t,n)];case 10:y.sent();y.label=11;case 11:return this.transport instanceof l.LongPollingTransport&&(this.features.inherentKeepAlive=!0),this.transport.onreceive=this.onreceive,this.transport.onclose=function(n){return v.stopConnection(n)},this.changeState(0,1),[3,13];case 12:h=y.sent();this.logger.log(u.LogLevel.Error,"Failed to start the connection: "+h);this.connectionState=2;this.transport=undefined;throw h;case 13:return[2]}})})},n.prototype.getNegotiationResponse=function(n){return e(this,void 0,void 0,function(){var i,s,r,e,t,o;return f(this,function(f){switch(f.label){case 0:return this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:r=f.sent();r&&(s=(i={},i.Authorization="Bearer "+r,i));f.label=2;case 2:e=this.resolveNegotiateUrl(n);this.logger.log(u.LogLevel.Debug,"Sending negotiation request: "+e+".");f.label=3;case 3:return f.trys.push([3,5,,6]),[4,this.httpClient.post(e,{content:"",headers:s})];case 4:if(t=f.sent(),t.statusCode!==200)throw Error("Unexpected status code returned from negotiate "+t.statusCode);return[2,JSON.parse(t.content)];case 5:o=f.sent();this.logger.log(u.LogLevel.Error,"Failed to complete negotiation with the server: "+o);throw o;case 6:return[2]}})})},n.prototype.createConnectUrl=function(n,t){return t?n+(n.indexOf("?")===-1?"?":"&")+("id="+t):n},n.prototype.createTransport=function(n,t,i,o){return e(this,void 0,void 0,function(){var e,l,s,c,a,h,v;return f(this,function(f){switch(f.label){case 0:return(e=this.createConnectUrl(n,i.connectionId),!this.isITransport(t))?[3,2]:(this.logger.log(u.LogLevel.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=t,[4,this.transport.connect(e,o)]);case 1:return f.sent(),this.changeState(0,1),[2];case 2:l=i.availableTransports||[];s=0;c=l;f.label=3;case 3:return(s<c.length)?(a=c[s],this.connectionState=0,h=this.resolveTransport(a,t,o),!(typeof h=="number"))?[3,8]:(this.transport=this.constructTransport(h),!!i.connectionId)?[3,5]:[4,this.getNegotiationResponse(n)]:[3,9];case 4:i=f.sent();e=this.createConnectUrl(n,i.connectionId);f.label=5;case 5:return f.trys.push([5,7,,8]),[4,this.transport.connect(e,o)];case 6:return f.sent(),this.changeState(0,1),[2];case 7:return v=f.sent(),this.logger.log(u.LogLevel.Error,"Failed to start the transport '"+r.HttpTransportType[h]+"': "+v),this.connectionState=2,i.connectionId=undefined,[3,8];case 8:return s++,[3,3];case 9:throw new Error("Unable to initialize any of the available transports.");}})})},n.prototype.constructTransport=function(n){switch(n){case r.HttpTransportType.WebSockets:if(!this.options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new w.WebSocketTransport(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1,this.options.WebSocket);case r.HttpTransportType.ServerSentEvents:if(!this.options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new p.ServerSentEventsTransport(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1,this.options.EventSource);case r.HttpTransportType.LongPolling:return new l.LongPollingTransport(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1);default:throw new Error("Unknown transport: "+n+".");}},n.prototype.resolveTransport=function(n,t,i){var f=r.HttpTransportType[n.transport],e;if(f===null||f===undefined)this.logger.log(u.LogLevel.Debug,"Skipping transport '"+n.transport+"' because it is not supported by this client.");else if(e=n.transferFormats.map(function(n){return r.TransferFormat[n]}),b(t,f))if(e.indexOf(i)>=0){if((f!==r.HttpTransportType.WebSockets||this.options.WebSocket)&&(f!==r.HttpTransportType.ServerSentEvents||this.options.EventSource))return this.logger.log(u.LogLevel.Debug,"Selecting transport '"+r.HttpTransportType[f]+"'."),f;this.logger.log(u.LogLevel.Debug,"Skipping transport '"+r.HttpTransportType[f]+"' because it is not supported in your environment.'")}else this.logger.log(u.LogLevel.Debug,"Skipping transport '"+r.HttpTransportType[f]+"' because it does not support the requested transfer format '"+r.TransferFormat[i]+"'.");else this.logger.log(u.LogLevel.Debug,"Skipping transport '"+r.HttpTransportType[f]+"' because it was disabled by the client.");return null},n.prototype.isITransport=function(n){return n&&typeof n=="object"&&"connect"in n},n.prototype.changeState=function(n,t){return this.connectionState===n?(this.connectionState=t,!0):!1},n.prototype.stopConnection=function(n){if(this.transport=undefined,n=this.stopError||n,n?this.logger.log(u.LogLevel.Error,"Connection disconnected with error '"+n+"'."):this.logger.log(u.LogLevel.Information,"Connection disconnected."),this.connectionState=2,this.onclose)this.onclose(n)},n.prototype.resolveUrl=function(n){if(n.lastIndexOf("https://",0)===0||n.lastIndexOf("http://",0)===0)return n;if(typeof window=="undefined"||!window||!window.document)throw new Error("Cannot resolve '"+n+"'.");var t=window.document.createElement("a");return t.href=n,this.logger.log(u.LogLevel.Information,"Normalizing '"+n+"' to '"+t.href+"'."),t.href},n.prototype.resolveNegotiateUrl=function(n){var i=n.indexOf("?"),t=n.substring(0,i===-1?n.length:i);return t[t.length-1]!=="/"&&(t+="/"),t+="negotiate",t+(i===-1?"":n.substring(i))},n}()},function(n,t,i){"use strict";var r,u;i.r(t);i.d(t,"HttpTransportType",function(){return r});i.d(t,"TransferFormat",function(){return u}),function(n){n[n.None=0]="None";n[n.WebSockets=1]="WebSockets";n[n.ServerSentEvents=2]="ServerSentEvents";n[n.LongPolling=4]="LongPolling"}(r||(r={})),function(n){n[n.Text=1]="Text";n[n.Binary=2]="Binary"}(u||(u={}))},function(n,t,i){"use strict";i.r(t);i.d(t,"LongPollingTransport",function(){return c});var h=i(20),o=i(4),r=i(9),s=i(18),u=i(13),f=undefined&&undefined.__awaiter||function(n,t,i,r){return new(i||(i=Promise))(function(u,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?u(n.value):new i(function(t){t(n.value)}).then(o,s)}e((r=r.apply(n,t||[])).next())})},e=undefined&&undefined.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e},c=function(){function n(n,t,i,r){this.httpClient=n;this.accessTokenFactory=t;this.logger=i;this.pollAbort=new h.AbortController;this.logMessageContent=r;this.running=!1;this.onreceive=null;this.onclose=null}return Object.defineProperty(n.prototype,"pollAborted",{get:function(){return this.pollAbort.aborted},enumerable:!0,configurable:!0}),n.prototype.connect=function(n,t){return f(this,void 0,void 0,function(){var i,c,h,f;return e(this,function(e){switch(e.label){case 0:if(u.Arg.isRequired(n,"url"),u.Arg.isRequired(t,"transferFormat"),u.Arg.isIn(t,s.TransferFormat,"transferFormat"),this.url=n,this.logger.log(r.LogLevel.Trace,"(LongPolling transport) Connecting."),t===s.TransferFormat.Binary&&typeof XMLHttpRequest!="undefined"&&typeof(new XMLHttpRequest).responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");return i={abortSignal:this.pollAbort.signal,headers:{},timeout:1e5},t===s.TransferFormat.Binary&&(i.responseType="arraybuffer"),[4,this.getAccessToken()];case 1:return c=e.sent(),this.updateHeaderToken(i,c),h=n+"&_="+Date.now(),this.logger.log(r.LogLevel.Trace,"(LongPolling transport) polling: "+h+"."),[4,this.httpClient.get(h,i)];case 2:return f=e.sent(),f.statusCode!==200?(this.logger.log(r.LogLevel.Error,"(LongPolling transport) Unexpected response code: "+f.statusCode+"."),this.closeError=new o.HttpError(f.statusText||"",f.statusCode),this.running=!1):this.running=!0,this.receiving=this.poll(this.url,i),[2]}})})},n.prototype.getAccessToken=function(){return f(this,void 0,void 0,function(){return e(this,function(n){switch(n.label){case 0:return this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:return[2,n.sent()];case 2:return[2,null]}})})},n.prototype.updateHeaderToken=function(n,t){if(n.headers||(n.headers={}),t){n.headers.Authorization="Bearer "+t;return}n.headers.Authorization&&delete n.headers.Authorization},n.prototype.poll=function(n,t){return f(this,void 0,void 0,function(){var h,s,i,f;return e(this,function(e){switch(e.label){case 0:e.trys.push([0,,8,9]);e.label=1;case 1:return this.running?[4,this.getAccessToken()]:[3,7];case 2:h=e.sent();this.updateHeaderToken(t,h);e.label=3;case 3:return e.trys.push([3,5,,6]),s=n+"&_="+Date.now(),this.logger.log(r.LogLevel.Trace,"(LongPolling transport) polling: "+s+"."),[4,this.httpClient.get(s,t)];case 4:if(i=e.sent(),i.statusCode===204)this.logger.log(r.LogLevel.Information,"(LongPolling transport) Poll terminated by server."),this.running=!1;else if(i.statusCode!==200)this.logger.log(r.LogLevel.Error,"(LongPolling transport) Unexpected response code: "+i.statusCode+"."),this.closeError=new o.HttpError(i.statusText||"",i.statusCode),this.running=!1;else if(i.content){if(this.logger.log(r.LogLevel.Trace,"(LongPolling transport) data received. "+Object(u.getDataDetail)(i.content,this.logMessageContent)+"."),this.onreceive)this.onreceive(i.content)}else this.logger.log(r.LogLevel.Trace,"(LongPolling transport) Poll timed out, reissuing.");return[3,6];case 5:return f=e.sent(),this.running?f instanceof o.TimeoutError?this.logger.log(r.LogLevel.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this.closeError=f,this.running=!1):this.logger.log(r.LogLevel.Trace,"(LongPolling transport) Poll errored after shutdown: "+f.message),[3,6];case 6:return[3,1];case 7:return[3,9];case 8:return this.logger.log(r.LogLevel.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this.raiseOnClose(),[7];case 9:return[2]}})})},n.prototype.send=function(n){return f(this,void 0,void 0,function(){return e(this,function(){return this.running?[2,Object(u.sendMessage)(this.logger,"LongPolling",this.httpClient,this.url,this.accessTokenFactory,n,this.logMessageContent)]:[2,Promise.reject(new Error("Cannot send until the transport is connected"))]})})},n.prototype.stop=function(){return f(this,void 0,void 0,function(){var n,t;return e(this,function(i){switch(i.label){case 0:this.logger.log(r.LogLevel.Trace,"(LongPolling transport) Stopping polling.");this.running=!1;this.pollAbort.abort();i.label=1;case 1:return i.trys.push([1,,5,6]),[4,this.receiving];case 2:return i.sent(),this.logger.log(r.LogLevel.Trace,"(LongPolling transport) sending DELETE request to "+this.url+"."),n={headers:{}},[4,this.getAccessToken()];case 3:return t=i.sent(),this.updateHeaderToken(n,t),[4,this.httpClient.delete(this.url,n)];case 4:return i.sent(),this.logger.log(r.LogLevel.Trace,"(LongPolling transport) DELETE request sent."),[3,6];case 5:return this.logger.log(r.LogLevel.Trace,"(LongPolling transport) Stop finished."),this.raiseOnClose(),[7];case 6:return[2]}})})},n.prototype.raiseOnClose=function(){if(this.onclose){var n="(LongPolling transport) Firing onclose event.";this.closeError&&(n+=" Error: "+this.closeError);this.logger.log(r.LogLevel.Trace,n);this.onclose(this.closeError)}},n}()},function(n,t,i){"use strict";i.r(t);i.d(t,"AbortController",function(){return r});var r=function(){function n(){this.isAborted=!1;this.onabort=null}return n.prototype.abort=function(){this.isAborted||(this.isAborted=!0,this.onabort&&this.onabort())},Object.defineProperty(n.prototype,"signal",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"aborted",{get:function(){return this.isAborted},enumerable:!0,configurable:!0}),n}()},function(n,t,i){"use strict";i.r(t);i.d(t,"ServerSentEventsTransport",function(){return s});var u=i(9),f=i(18),r=i(13),e=undefined&&undefined.__awaiter||function(n,t,i,r){return new(i||(i=Promise))(function(u,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?u(n.value):new i(function(t){t(n.value)}).then(o,s)}e((r=r.apply(n,t||[])).next())})},o=undefined&&undefined.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e},s=function(){function n(n,t,i,r,u){this.httpClient=n;this.accessTokenFactory=t;this.logger=i;this.logMessageContent=r;this.eventSourceConstructor=u;this.onreceive=null;this.onclose=null}return n.prototype.connect=function(n,t){return e(this,void 0,void 0,function(){var e,i=this;return o(this,function(o){switch(o.label){case 0:return(r.Arg.isRequired(n,"url"),r.Arg.isRequired(t,"transferFormat"),r.Arg.isIn(t,f.TransferFormat,"transferFormat"),this.logger.log(u.LogLevel.Trace,"(SSE transport) Connecting."),this.url=n,!this.accessTokenFactory)?[3,2]:[4,this.accessTokenFactory()];case 1:e=o.sent();e&&(n+=(n.indexOf("?")<0?"?":"&")+("access_token="+encodeURIComponent(e)));o.label=2;case 2:return[2,new Promise(function(e,o){var h=!1,s,c;if(t!==f.TransferFormat.Text){o(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}typeof window!="undefined"?s=new i.eventSourceConstructor(n,{withCredentials:!0}):(c=i.httpClient.getCookieString(n),s=new i.eventSourceConstructor(n,{withCredentials:!0,headers:{Cookie:c}}));try{s.onmessage=function(n){if(i.onreceive)try{i.logger.log(u.LogLevel.Trace,"(SSE transport) data received. "+Object(r.getDataDetail)(n.data,i.logMessageContent)+".");i.onreceive(n.data)}catch(t){i.close(t);return}};s.onerror=function(n){var t=new Error(n.data||"Error occurred");h?i.close(t):o(t)};s.onopen=function(){i.logger.log(u.LogLevel.Information,"SSE connected to "+i.url);i.eventSource=s;h=!0;e()}}catch(l){o(l);return}})]}})})},n.prototype.send=function(n){return e(this,void 0,void 0,function(){return o(this,function(){return this.eventSource?[2,Object(r.sendMessage)(this.logger,"SSE",this.httpClient,this.url,this.accessTokenFactory,n,this.logMessageContent)]:[2,Promise.reject(new Error("Cannot send until the transport is connected"))]})})},n.prototype.stop=function(){return this.close(),Promise.resolve()},n.prototype.close=function(n){if(this.eventSource&&(this.eventSource.close(),this.eventSource=undefined,this.onclose))this.onclose(n)},n}()},function(n,t,i){"use strict";i.r(t);i.d(t,"WebSocketTransport",function(){return s});var r=i(9),f=i(18),u=i(13),e=undefined&&undefined.__awaiter||function(n,t,i,r){return new(i||(i=Promise))(function(u,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?u(n.value):new i(function(t){t(n.value)}).then(o,s)}e((r=r.apply(n,t||[])).next())})},o=undefined&&undefined.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e},s=function(){function n(n,t,i,r,u){this.logger=i;this.accessTokenFactory=t;this.logMessageContent=r;this.webSocketConstructor=u;this.httpClient=n;this.onreceive=null;this.onclose=null}return n.prototype.connect=function(n,t){return e(this,void 0,void 0,function(){var e,i=this;return o(this,function(o){switch(o.label){case 0:return(u.Arg.isRequired(n,"url"),u.Arg.isRequired(t,"transferFormat"),u.Arg.isIn(t,f.TransferFormat,"transferFormat"),this.logger.log(r.LogLevel.Trace,"(WebSockets transport) Connecting."),!this.accessTokenFactory)?[3,2]:[4,this.accessTokenFactory()];case 1:e=o.sent();e&&(n+=(n.indexOf("?")<0?"?":"&")+("access_token="+encodeURIComponent(e)));o.label=2;case 2:return[2,new Promise(function(e,o){n=n.replace(/^http/,"ws");var s,h=i.httpClient.getCookieString(n);typeof window=="undefined"&&h&&(s=new i.webSocketConstructor(n,undefined,{headers:{Cookie:""+h}}));s||(s=new i.webSocketConstructor(n));t===f.TransferFormat.Binary&&(s.binaryType="arraybuffer");s.onopen=function(){i.logger.log(r.LogLevel.Information,"WebSocket connected to "+n+".");i.webSocket=s;e()};s.onerror=function(n){var t=null;typeof ErrorEvent!="undefined"&&n instanceof ErrorEvent&&(t=n.error);o(t)};s.onmessage=function(n){if(i.logger.log(r.LogLevel.Trace,"(WebSockets transport) data received. "+Object(u.getDataDetail)(n.data,i.logMessageContent)+"."),i.onreceive)i.onreceive(n.data)};s.onclose=function(n){return i.close(n)}})]}})})},n.prototype.send=function(n){return this.webSocket&&this.webSocket.readyState===this.webSocketConstructor.OPEN?(this.logger.log(r.LogLevel.Trace,"(WebSockets transport) sending data. "+Object(u.getDataDetail)(n,this.logMessageContent)+"."),this.webSocket.send(n),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")},n.prototype.stop=function(){return this.webSocket&&(this.webSocket.onclose=function(){},this.webSocket.onmessage=function(){},this.webSocket.onerror=function(){},this.webSocket.close(),this.webSocket=undefined,this.close(undefined)),Promise.resolve()},n.prototype.close=function(n){if(this.logger.log(r.LogLevel.Trace,"(WebSockets transport) socket closed."),this.onclose)if(n&&(n.wasClean===!1||n.code!==1e3))this.onclose(new Error("WebSocket closed with status code: "+n.code+" ("+n.reason+")."));else this.onclose()},n}()},function(n,t,i){"use strict";i.r(t);i.d(t,"JsonHubProtocol",function(){return h});var r=i(15),f=i(9),e=i(18),o=i(14),u=i(12),s="json",h=function(){function n(){this.name=s;this.version=1;this.transferFormat=e.TransferFormat.Text}return n.prototype.parseMessages=function(n,t){var c,s,e,h,l,i;if(typeof n!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!n)return[];for(t===null&&(t=o.NullLogger.instance),c=u.TextMessageFormat.parse(n),s=[],e=0,h=c;e<h.length;e++){if(l=h[e],i=JSON.parse(l),typeof i.type!="number")throw new Error("Invalid payload.");switch(i.type){case r.MessageType.Invocation:this.isInvocationMessage(i);break;case r.MessageType.StreamItem:this.isStreamItemMessage(i);break;case r.MessageType.Completion:this.isCompletionMessage(i);break;case r.MessageType.Ping:break;case r.MessageType.Close:break;default:t.log(f.LogLevel.Information,"Unknown message type '"+i.type+"' ignored.");continue}s.push(i)}return s},n.prototype.writeMessage=function(n){return u.TextMessageFormat.write(JSON.stringify(n))},n.prototype.isInvocationMessage=function(n){this.assertNotEmptyString(n.target,"Invalid payload for Invocation message.");n.invocationId!==undefined&&this.assertNotEmptyString(n.invocationId,"Invalid payload for Invocation message.")},n.prototype.isStreamItemMessage=function(n){if(this.assertNotEmptyString(n.invocationId,"Invalid payload for StreamItem message."),n.item===undefined)throw new Error("Invalid payload for StreamItem message.");},n.prototype.isCompletionMessage=function(n){if(n.result&&n.error)throw new Error("Invalid payload for Completion message.");!n.result&&n.error&&this.assertNotEmptyString(n.error,"Invalid payload for Completion message.");this.assertNotEmptyString(n.invocationId,"Invalid payload for Completion message.")},n.prototype.assertNotEmptyString=function(n,t){if(typeof n!="string"||n==="")throw new Error(t);},n}()}])});$(document).on("click",".collapsButton",function(){$(this).find(".fa").hasClass("fa-minus")?$(this).find(".fa").addClass("fa-plus").removeClass("fa-minus"):$(this).find(".fa").addClass("fa-minus").removeClass("fa-plus");$(".collapsed").each(function(){$(this).find(".fa").addClass("fa-plus").removeClass("fa-minus")})});$(document).on("keydown",".required",function(n){return console.log(this.value),n.which===32&&n.target.selectionStart===0?!1:void 0});$(document).ready(function(){$(".loading").hide();window.location.href.indexOf("PurchaseOrdersCheckIn/Single/")>-1&&($(".collapsButton").click(),$(".total_po_count,.custom_pagination").hide())});$(document).on("change",".item_note",function(){var t=$(this).parents("tr").attr("data-productid"),n;$(".message-"+t).append('<div class="spinner-border text-info"><\/div>');n={};n.item_id=$(this).attr("data-itemid");n.item_note=$(this).val();console.log(n);$.ajax({url:"/purchaseorders/itemnotecreate",type:"post",contentType:"application/json",data:JSON.stringify(n),processData:!1}).always(function(n){console.log(n);n=="0"?($(this).val(""),alertInnerBox("message-"+t,"red","Item note has error - "+n)):alertInnerBox("message-"+t,"green","Item note has been updated successfully")})});$(document).on("click","#AddDocument",function(){$(".poDocAlertMsg").text("");$("#document_form")[0].reset();var n=$(this).attr("data-itemid"),t=$(this).attr("data-productid");$("#document_form").attr("data-documentid",n);$("#document_form").attr("data-productid",t);$.ajax({url:"/purchaseorders/getitemdocument/"+n,dataType:"json",type:"Get",contentType:"application/json"}).always(function(t){console.log(t);$(".po_doc_section").empty();t.length>0?($(t).each(function(t,i){$(".po_doc_section").append("<a href="+window.location.origin+"/uploads/"+i.url+" target='_blank' class='documentsLink' data-itemid="+n+" data-docid="+i.doc_id+" data-val="+i.url+">"+i.url+" <span class='podeleteImage'>×<\/span><\/a>")}),$(".po_doc_section").removeClass("d-none")):$(".po_doc_section").addClass("d-none");$("#modaladddocument").modal("show")})});$(document).on("click","#document_submit",function(){var n=$("#document_form").attr("data-productid"),f=$("#document_form").attr("data-documentid"),u,r,t,i;if($(".poDocAlertMsg").text(""),$("#poUploadImages").val()=="")return $(".poDocAlertMsg").css("color","red").text("Please upload files."),!1;if($(".message-"+n).append('<div class="spinner-border text-info"><\/div>'),u=$("#poUploadImages")[0].files.length,u!=0){for(r=$("#poUploadImages")[0].files,t=new FormData,t.append("po_id",$("#document_form").attr("data-documentid")),i=0;i!=r.length;i++)t.append("purchaseOrderDocuments",r[i]);$.ajax({url:"/purchaseorders/itemdocumentcreate",type:"POST",data:t,processData:!1,contentType:!1}).always(function(t){console.log(t);t=="0"?(console.log("Exception Error"),alertInnerBox("message-"+n,"red","Item document has error - "+t)):t.indexOf("File Already")>-1?$(".message-"+n).empty().html(""):(alertInnerBox("message-"+n,"green","Item document has been updated successfully"),$("#AddDocument[data-itemid='"+f+"']").find(".redDotDoc").addClass("redDOtElement"),$("#modaladddocument").modal("hide"))})}});$(document).on("change",".item_status",function(){var t=!1,n=$(this).parents("tr").attr("data-productid"),e,i,u;if($(".message-"+n).append('<div class="spinner-border text-info"><\/div>'),$(this).parents("td").find(".checkitemstatus").is(":checked"))e=$(this).parents("td").find(".checkitemstatus").attr("data-status"),i=$(this).val(),$(".item_status").each(function(){if($(this).attr("data-status")==e){$(this).val(i);var n=$(this).attr("data-itemid"),u=$("input#"+n).val(),r=JSON.parse(u);r.item_status_id=i;$("input#"+n).val(JSON.stringify(r));console.log($("input#"+n).val());$.ajax({url:"/purchaseorders/itemupdate/"+n,type:"post",contentType:"application/json",data:JSON.stringify(r),processData:!1}).always(function(n){console.log(n);t=n=="Success"?!0:"error"})}}),u=setInterval(function(){t?(alertInnerBox("message-"+n,"green","Item status has been updated successfully"),clearInterval(u)):t=="error"&&(alertInnerBox("message-"+n,"red","Item status has error - "+data),clearInterval(u))},1e3);else{var f=$(this).attr("data-itemid"),i=$(this).val(),o=$("input#"+f).val(),r=JSON.parse(o),s=r.item_id;r.item_status_id=parseInt(i);$("input#"+f).val(JSON.stringify(r));console.log($("input#"+f).val());$.ajax({url:"/purchaseorders/itemupdate/"+s,type:"post",contentType:"application/json",data:JSON.stringify(r),processData:!1}).always(function(t){console.log(t);t=="Success"?alertInnerBox("message-"+n,"green","Item status has been updated successfully"):alertInnerBox("message-"+n,"red","Item status has error - "+t)})}});$(".sku_weight").on("keydown",function(n){return isNumber(n)});$(document).on("keydown",".sku_weight_field input",function(n){return $(this).val().indexOf(".")>-1&&n.which==190?!1:onlyNumbersWithDot(n)});$(document).on("change",".sku_weight",function(){var i=$(this).parents("tr").attr("data-productid"),n=$(this).attr("id"),t=$(this).val(),r=$(this).attr("data-weight"),u;if(t=="")return!1;console.log(n+" -- "+t);u=$(this).attr("data-productid");confirmationBox(u,"SKU Weight Update","This will all same SKU weight updates, Do you want to continue?",function(u){if(console.log(u),u=="yes"){$(".message-"+i).append('<div class="spinner-border text-info"><\/div>');var f={};f.sku_id=n;f.weight=t;$.ajax({url:"/purchaseorders/skuweightupdate/"+n,type:"post",contentType:"application/json",data:JSON.stringify(f),processData:!1}).always(function(r){console.log(r);r=="Success"?($(".sku_weight").each(function(){$(this).attr("id")==n&&($(this).val(t),$(this).attr("data-weight",t))}),alertInnerBox("message-"+i,"green","SKU weight has been updated successfully")):alertInnerBox("message-"+i,"red","SKU weight has error - "+r)})}else $(".sku_weight").each(function(){$(this).attr("id")==n&&($(this).val(r),$(this).attr("data-weight",r))})})});$(document).on("keydown",".item_barcode",function(n){return isNumber(n)});$(document).on("change",".item_barcode",function(){var i=$(this),t=$(this).parents("tr").attr("data-productid"),a=$(this).parents("tr").find(".item_status").val(),e,o,u,s,h;if(a==1)return $(this).val(""),alertInnerBox("message-"+t,"red","Change item status:"),!1;var r=$(this).attr("data-itemid"),c=$(this).attr("data-barcode"),l=$(this).parents("tr").attr("data-size"),n=$(this).val(),f=JSON.parse($("#allBarcodeRanges").val());if($(this).removeClass("errorFeild"),n.length<8)return $(this).addClass("errorFeild"),!1;if(c==n)return i.removeClass("errorFeild"),!1;for(e=!1,o=-1,u=0;u<f.length;u++)if(s=f[u],n>=s.barcode_from&&n<=s.barcode_to){e=!0;o=u;break}e?(h=f[o],h.size.toLowerCase()!=l.toLowerCase()?confirmationBox(t,"","The barcode you entered matched a size "+h.size.toUpperCase()+" but you are trying to use it for an "+l.toUpperCase()+". Are you sure you want to continue? ",function(u){if(console.log(u),u=="yes")i.removeClass("errorFeild"),$(".message-"+t).append('<div class="spinner-border text-info"><\/div>'),$.ajax({url:"/purchaseorders/checkbarcodeexist/"+n,type:"Get",contentType:"application/json"}).always(function(u){if(console.log(u),u=="true")return i.addClass("errorFeild"),alertInnerBox("message-"+t,"red","Item barcode has already exist - "+n),!1;var e=$("input#"+r).val(),f=JSON.parse(e),o=f.item_id;f.barcode=n;$("input#"+r).val(JSON.stringify(f));console.log($("input#"+r).val());$.ajax({url:"/purchaseorders/itemupdate/"+o,type:"post",contentType:"application/json",data:JSON.stringify(f),processData:!1}).always(function(r){console.log(r);r=="Success"?(i.attr("data-barcode",n),alertInnerBox("message-"+t,"green","Item barcode has been updated successfully")):alertInnerBox("message-"+t,"red","Item barcode has error - "+r)})});else return $(this).text=c,$(this).addClass("errorFeild"),!1}):(i.removeClass("errorFeild"),$(".message-"+t).append('<div class="spinner-border text-info"><\/div>'),$.ajax({url:"/purchaseorders/checkbarcodeexist/"+n,type:"Get",contentType:"application/json"}).always(function(u){if(console.log(u),u=="true")return i.addClass("errorFeild"),alertInnerBox("message-"+t,"red","Item barcode has already exist - "+n),!1;var e=$("input#"+r).val(),f=JSON.parse(e),o=f.item_id;f.barcode=n;$("input#"+r).val(JSON.stringify(f));console.log($("input#"+r).val());$.ajax({url:"/purchaseorders/itemupdate/"+o,type:"post",contentType:"application/json",data:JSON.stringify(f),processData:!1}).always(function(r){console.log(r);r=="Success"?(i.attr("data-barcode",n),alertInnerBox("message-"+t,"green","Item barcode has been updated successfully")):alertInnerBox("message-"+t,"red","Item barcode has error - "+r)})}))):(i.removeClass("errorFeild"),$(".message-"+t).append('<div class="spinner-border text-info"><\/div>'),$.ajax({url:"/purchaseorders/checkbarcodeexist/"+n,type:"Get",contentType:"application/json"}).always(function(u){if(console.log(u),u=="true")return i.addClass("errorFeild"),alertInnerBox("message-"+t,"red","Item barcode has already exist - "+n),!1;var e=$("input#"+r).val(),f=JSON.parse(e),o=f.item_id;f.barcode=n;$("input#"+r).val(JSON.stringify(f));console.log($("input#"+r).val());$.ajax({url:"/purchaseorders/itemupdate/"+o,type:"post",contentType:"application/json",data:JSON.stringify(f),processData:!1}).always(function(r){console.log(r);r=="Success"?(i.attr("data-barcode",n),alertInnerBox("message-"+t,"green","Item barcode has been updated successfully")):alertInnerBox("message-"+t,"red","Item barcode has error - "+r)})}))});$(document).on("click",".item_row_remove",function(){var f=$(this),t=$(this).attr("data-itemid"),u=$(this).attr("data-polineitem"),i=$(this).attr("data-quantity"),e=5,r=$(this).attr("data-productid"),n=$(this).attr("data-poid");confirmationBox(r,"Item Remove","Do you want to remove this item?",function(o){if(console.log(o),o=="yes"){$(".message-"+r).append('<div class="spinner-border text-info"><\/div>');var h=$("input#"+t).val(),s=JSON.parse(h),c=s.item_id;s.item_status_id=e;$("input#"+t).val(JSON.stringify(s));console.log($("input#"+t).val());$.ajax({url:"/purchaseorders/itemupdate/"+c,type:"post",contentType:"application/json",data:JSON.stringify(s),processData:!1}).always(function(e){console.log(e);var o={};o.line_item_id=u;i=i-1;o.line_item_ordered_quantity=i;o.po_id=n;$.ajax({url:"/purchaseorders/polineitemupdate/"+u,type:"post",contentType:"application/json",data:JSON.stringify(o),processData:!1}).always(function(e){var o,s,h,c;console.log(e);e=="Success"?(o=$('button[data-poid="'+n+'"][id=AddItemButton][class="btn btn-light btn-sm"]').data("calculationvalues"),o==""||o==null?(o=[{value:1,calculation_id:6},{value:1,calculation_id:5}],$('button[data-poid="'+n+'"][id=AddItemButton][class="btn btn-light btn-sm"]').data("calculationvalues",o)):(s=o.filter(function(n){return n.calculation_id==5}),h=o.filter(function(n){return n.calculation_id==6}),s[0].value-=1,c=[s[0],h[0]],$('button[data-poid="'+n+'"][id=AddItemButton][class="btn btn-light btn-sm"]').data("calculationvalues",c)),$(".item_row_remove").each(function(){$(this).attr("data-polineitem")==u&&$(this).attr("data-quantity",i)}),f.parents("tr.remove-"+t).remove(),$("#collapse_"+n).html(""),getPurchaseOrdersItemdetails(n),alertInnerBox("message-"+r,"green","Item has been removed successfully")):alertInnerBox("message-"+r,"red","Item has error - "+e)})})}})});$(document).on("change",".item_sku",function(){var f=$(this),t=$(this).parents("tr").attr("data-productid"),i=$(this).attr("id"),n=$(this).val(),r=$(this).attr("data-sku"),h=$(this).attr("data-polineitem"),e=$(this).attr("data-productid"),c=$(this).attr("data-productattributeid"),l=$(this).attr("data-quantity"),e=$(this).attr("data-productid"),u=$(this).attr("data-productid"),o,s;if(u=$(this).parents(".card").find("#headinginner"+u).find(".skufamilyArea").attr("data-skufamily"),$(this).val().split("-")[0]!=u)return $(this).addClass("errorFeild"),alertInnerBox("message-"+t,"red","SKU-family is not match"),!1;if(($(this).removeClass("errorFeild"),n=="")||(o=checkClothingSkuPattern(),s=n.toUpperCase(),o.test(s)==!1))return $(this).addClass("errorFeild"),!1;if($(this).removeClass("errorFeild"),r==n)return f.removeClass("errorFeild"),!1;$.ajax({url:"/purchaseorders/checkskuexist/"+n,type:"Get",contentType:"application/json"}).always(function(u){if(console.log(u),u=="true")return f.addClass("errorFeild"),alertInnerBox("message-"+t,"red","SKU has already exist - "+n),!1;confirmationBox(e,"SKU Update","This will all same SKU updates, Do you want to continue?",function(u){if(console.log(u),u=="yes"){$(".message-"+t).append('<div class="spinner-border text-info"><\/div>');var f={};f.sku_id=i;f.sku=n;f.quantity=l;f.line_item_id=h;f.product_id=e;f.product_attribute_id=c;$.ajax({url:"/purchaseorders/skuupdate/"+i,type:"post",contentType:"application/json",data:JSON.stringify(f),processData:!1}).always(function(r){console.log(r);r=="Success"&&$(".item_sku").each(function(){if($(this).attr("id")==i){$(this).val(n);$(this).attr("data-sku",n);var u=$(this).attr("data-itemid"),f=$("input#"+u).val(),r=JSON.parse(f),e=r.item_id;r.sku=n;$("input#"+u).val(JSON.stringify(r));console.log($("input#"+u).val());$.ajax({url:"/purchaseorders/itemupdate/"+e,type:"post",contentType:"application/json",data:JSON.stringify(r),processData:!1}).always(function(n){console.log(n);n=="Success"?alertInnerBox("message-"+t,"green","SKU has been updated successfully"):alertInnerBox("message-"+t,"red","SKU has error - "+n)})}})})}else $(".item_sku").each(function(){$(this).attr("id")==i&&($(this).val(r),$(this).attr("data-sku",r))})})})});$(".POList .card-header").click(function(){var t=$(this),n=t.attr("data-POId");$("#collapse_"+n).is(":hidden")?getPOdetail(n):$("#collapse_"+n).html("")});$(".POListCheckIn .card-header .card-box").click(function(){var t=$(this),n=t.attr("data-POId");console.log($("#collapse_"+n));console.log($("#collapse_"+n).is(":visible"));console.log($("#collapse_"+n).is(":hidden"));$("#collapse_"+n).is(":hidden")?($("#collapse_"+n).find(".card-body").length==0&&getPurchaseOrdersItemdetails(n),$("#collapse_"+n).show(),$("#collapse_"+n).attr("data-colapse",!0)):$("#collapse_"+n).attr("data-colapse")?$("#collapse_"+n).hide():$("#collapse_"+n).html("")});$(document).on("change",".item_bagcode",function(){var t=$(this).parents("tr").attr("data-productid"),i=$(this).attr("data-itemid"),r=$(this).val();if($(this).removeClass("errorFeild"),r.length<1)return $(this).addClass("errorFeild"),!1;$(".message-"+t).append('<div class="spinner-border text-info"><\/div>');var u=$("input#"+i).val(),n=JSON.parse(u),f=n.item_id;n.bag_code=r;$("input#"+i).val(JSON.stringify(n));console.log($("input#"+i).val());$.ajax({url:"/purchaseorders/itemupdate/"+f,type:"post",contentType:"application/json",data:JSON.stringify(n),processData:!1}).always(function(n){console.log(n);n=="Success"?alertInnerBox("message-"+t,"green","Item bag code has been updated successfully"):alertInnerBox("message-"+t,"red","Item bag code has error - "+n)})});$(document).on("change",".item_ra_status",function(){var t=$(this).parents("tr").attr("data-productid");$(".message-"+t).append('<div class="spinner-border text-info"><\/div>');var i=$(this).attr("data-itemid"),r=$(this).val(),u=$("input#"+i).val(),n=JSON.parse(u),f=n.item_id;n.ra_status=parseInt(r);$("input#"+i).val(JSON.stringify(n));console.log($("input#"+i).val());$.ajax({url:"/purchaseorders/itemupdate/"+f,type:"post",contentType:"application/json",data:JSON.stringify(n),processData:!1}).always(function(n){console.log(n);n=="Success"?alertInnerBox("message-"+t,"green","Ra status has been updated successfully"):alertInnerBox("message-"+t,"red","Ra status has error - "+n)})});$(document).on("click","#sku_weight",function(){var n,t,i,r;$(".sku_weight_field").addClass("d-none");$("#weight_form input").val("");n=$(this).attr("data-productid");$("#weight_form").attr("data-productid",n);t=$(this).attr("data-sku");i=$(".img-"+n).attr("src");console.log(t+" -- "+i);$("#weight_form .weight_image").attr("src",i);$("#weight_form .weight_sku").text(t);r='<div class="form-group col-md-3 pl-5"><\/div>';$(".table-data-"+n+" tbody tr").not(".collapse").each(function(){var t=$(this).attr("data-weight"),n=$(this).attr("data-size").toLowerCase(),i=$(this).attr("data-skuid");r+='<div class="form-group col-md-2 text-center sku_weight_field"><strong>'+n.toUpperCase()+'<\/strong><input data-skuid="'+i+'" type="text" value="'+t+'" class="form-control" id="'+n+'_weight" name="'+n+'_weight"><\/div>'});$(".sku_weight_inputs").html(r);$("#modaladdweight").modal("show")});$(document).on("click","#weight_submit",function(){var u=$("#weight_form").attr("data-productid"),f=!1,e="",t="",r="",n={};n.skuData=[];$("#weight_form input").each(function(){if(t=$(this).val(),r=$(this).attr("data-skuid"),(r!=0||r!="")&&(t!=0||t!="")){var i={};i.sku_id=r;i.weight=t;n.skuData.push(i)}});$.ajax({url:"/purchaseorders/MultipleskuWeightUpdate/",type:"post",contentType:"application/json",data:JSON.stringify(n),processData:!1,"async":!1}).always(function(t){if(console.log(t),t=="Success"){f=!0;var r=!1;for(i=0;i<n.skuData.length;i++)$(".table-data-"+u+" tbody tr[data-skuid='"+n.skuData[i].sku_id+"']").attr("data-weight",n.skuData[i].weight),n.skuData[i].weight==0&&(r=!0);r==!0&&$("#sku_weight").removeClass("btn-primary").addClass("btn-success").text("ADD WEIGHT");r==!1&&$("#sku_weight").addClass("btn-primary").removeClass("btn-success").text("EDIT WEIGHT");$("#modaladdweight").modal("hide");alertInnerBox("message-"+u,"green","SKU weight has been updated successfully")}else f="error",alertInnerBox("message-"+u,"red","SKU weight has error - "+e)})});$(document).on("change",".wash_type_status",function(){var n=$(this).attr("data-productid"),i,t;$(".message-"+n).append('<div class="spinner-border text-info"><\/div>');i=$(this).val();console.log(n+" -- "+i);t={};t.product_id=n;t.wash_type_id=i;$.ajax({url:"/purchaseorders/productwashtypeupdate/"+n,type:"post",contentType:"application/json",data:JSON.stringify(t),processData:!1}).always(function(t){console.log(t);t=="Success"?alertInnerBox("message-"+n,"green","Product wash type has been updated successfully"):alertInnerBox("message-"+n,"red","Product wash type has an error - "+t)})});$(document).on("click",".podeleteImage",function(n){n.preventDefault();n.stopPropagation();var i=$(this),r=i.parents(".documentsLink").attr("data-docid"),u=i.parents(".documentsLink").attr("data-itemid"),f=i.parents(".documentsLink").attr("data-val"),e=$("#document_form").attr("data-documentid"),t={};t.doc_id=r;t.po_id=e;t.url=f;t.item="item";t.itemid=u;console.log(t);$.ajax({url:"/purchaseorders/documentsdelete/"+r,type:"post",contentType:"application/json",data:JSON.stringify(t),processData:!1}).always(function(n){console.log(n);n!="0"&&i.parents(".documentsLink").remove();$("#modaladddocument .po_doc_section a").length==0&&$("#AddDocument[data-itemid='"+u+"']").find(".redDotDoc").removeClass("redDOtElement")})});$(document).on("change",".checkrastatus",function(){$(this).is(":checked")&&($(this).hide(),$(this).parents("td").find("select.item_ra_status:first").removeClass("d-none"))});$(document).on("change",".checkitemstatus",function(){var n=$(this).attr("data-status");$(this).is(":checked")?$(".checkitemstatus").each(function(){$(this).attr("data-status")==n&&$(this).prop("checked",!0)}):$(".checkitemstatus").each(function(){$(this).attr("data-status")==n&&$(this).prop("checked",!1)})});$(document).on("click",".ModalAddFabric",function(){$(".loading").show();var n=$(this).data("productid");$("#tbH_ProductID").val(n);getFabrics(n);$(".fabricHeading").hide();$("#tb_fabricSuggest").val("");$("#tb_fabricSuggest").removeClass("errorFeild")});connection=(new signalR.HubConnectionBuilder).withUrl("/claimHub",{transport:signalR.HttpTransportType.WebSockets}).build();ToggleClaim(!0);connection.on("PushClaim",function(n){var t=$("#poId").val();(n.po_id==t||t==undefined)&&(BindInspectClaimHtml(n),BindPublishClaimHtml(n))});StartConnection();RestartConnection();$(document).on("keydown","#item_barcode",function(n){return isNumber(n)});$(document).on("click","#EditPurhaseOrderCheckedIn",function(){var i,u;$(".docTypeSection").remove();$(".modal-footer").find("button").attr("disabled",!1);var r="",n=$(this).parents("tr").children("td:first").text(),t=$(this).parents("tr").children("td:nth-child(3)").text();n==""&&(n=$(".orderNumber").text());t==""&&(t=$("#poVendor").val());console.log(n+" -- "+t);$("#checkinModalLongTitle").text("Purchase Order #"+n+" - "+t+" - Check-in");i=$(this).attr("data-ID");u=$(this).attr("data-shipping");$("#checkin_form #poShipping").val(u);$(".loading").show();$.ajax({url:"/purchaseorders/PurchaseOrderItemDetails/"+i,dataType:"json",type:"Get",contentType:"application/json"}).always(function(n){console.log(n);n!="0"&&(n.itemsList.length>0&&$(n.itemsList).each(function(n,t){console.log(t.product_name+" ("+t.small_sku+")-"+t.size);r+="<div class='form-row align-items-center product_name_with_small_sku_size'><div class='form-group col-md-6' ><label>"+t.product_name+" ("+t.small_sku+")-"+t.size+"<\/label><\/div><div class='form-group col-md-6'><input type='text' class='form-control' name='item_barcode' id='item_barcode' data-itemid="+t.item_id+" value="+t.barcode+" maxlength='8'><\/div><\/div>"}),$(".po_doc_section").empty(),$(".po_doc_section").addClass("d-none"),n.originalpo.length>0&&($(n.originalpo).each(function(n,t){$(".po_doc_section").append("<a href='uploads/"+t.url+"' target='_blank' class='documentsLink' data-documentid="+t.ref_id+" data-docid="+t.doc_id+" data-val="+t.url+">"+t.url+" <span class='podeleteImage'>×<\/span><\/a> <br>")}),$(".po_doc_section").removeClass("d-none")),n.shipmentinvoice.length>0&&($(n.shipmentinvoice).each(function(n,t){$(".po_doc_section").append("<a href='uploads/"+t.url+"' target='_blank' class='documentsLink' data-documentid="+t.ref_id+" data-docid="+t.doc_id+" data-val="+t.url+">"+t.url+" <span class='podeleteImage'>×<\/span><\/a> <br>")}),$(".po_doc_section").removeClass("d-none")),n.mainshipmentinvoice.length>0&&($(n.mainshipmentinvoice).each(function(n,t){$(".po_doc_section").append("<a href='uploads/"+t.url+"' target='_blank' class='documentsLink' data-documentid="+t.ref_id+" data-docid="+t.doc_id+" data-val="+t.url+">"+t.url+" <span class='podeleteImage'>×<\/span><\/a> <br>")}),$(".po_doc_section").removeClass("d-none")),n.others.length>0&&($(n.others).each(function(n,t){$(".po_doc_section").append("<a href='uploads/"+t.url+"' target='_blank' class='documentsLink' data-documentid="+t.ref_id+" data-docid="+t.doc_id+" data-val="+t.url+">"+t.url+" <span class='podeleteImage'>×<\/span><\/a> <br>")}),$(".po_doc_section").removeClass("d-none")),$(".poTracking").val(""),$("#wrapper_checkin_tracking").empty().html(""),n.tracking.length>0&&$(n.tracking).each(function(n,t){n==0?($(".poTracking").val(t.tracking_number),$(".poTracking").attr("id",t.po_tracking_id)):$("#wrapper_checkin_tracking").append('<div class="tracking_add_more_box"><input type="text" class="form-control d-inline-block poTracking" name="poTracking[]" id="'+t.po_tracking_id+'" value="'+t.tracking_number+'" style="width: 90%"> <a href="#" class="h4 red_color remove_tracking">-<\/a><\/div>')}));$(".loading").hide();$(".wrapper_product").empty().html(r);$("#checkin_form").attr("data-poid",i);$("#modalcheckin").modal("show")})});$(document).on("click",".submit-check-in",function(){var n=$("#checkin_form").attr("data-poid"),i=$("#checkin_form #poShipping").val(),t;console.log(n+" -- "+i);t={};t.shipping=i;t.tracking=[];$(".poTracking").removeAttr("id");$(".poTracking").val("");$("#checkin_form .poTracking:visible").each(function(){var n={};n.track=$(this).val();n.id=$(this).attr("id")=="undefined"?"":$(this).attr("id");t.tracking.push(n)});console.log(t.tracking);t.items_barcodes=[];$(".product_name_with_small_sku_size :input").each(function(){if($(this).val().length==8){var n={item_id:$(this).attr("data-itemid"),barcode:$(this).val()};t.items_barcodes.push(n)}});console.log(t);$.ajax({url:"/purchaseorders/updatepurchaseordercheckin/"+n,type:"post",contentType:"application/json",data:JSON.stringify(t),processData:!1}).always(function(t){var f,u,i,r;if(console.log(t),t=="Success"){if($(".postatus-"+n).text("Recieved"),$(".checked-"+n).removeClass("btn-warning").addClass("btn-success").removeAttr("id").text("Checked-In"),$(".removeRed-"+n).removeClass("text-danger font-weight-bold "),$(".removeRed-"+n+" a").removeClass("text-danger font-weight-bold "),$(".days-"+n).text("0 Day"),f=$("#checkin_form #poUploadImage")[0].files.length,f!=0){for(u=$("#checkin_form #poUploadImage")[0].files,i=new FormData,i.append("po_id",n),i.append("doc_type",$("#poUploadImages").attr("data-categorie")),r=0;r!=u.length;r++)i.append("purchaseOrderDocuments",u[r]);$.ajax({url:"/purchaseorders/purchaseorder_doc",type:"POST",data:i,processData:!1,contentType:!1}).always(function(t){console.log(t);t.indexOf("File Already")>-1?alertBox("poAlertMsg","red",t):t=="0"?(console.log("Exception Error"),alertBox("poAlertMsg","red","Purchase order document Exception Error.")):$("#EditPurhaseOrderDocument[data-id='"+n+"']").find(".redDotDoc").addClass("redDOtElement")})}$("#modalcheckin").modal("hide");alertBox("poAlertMsg","green","Purchase order updated successfully");$("#checkin_form")[0].reset()}else alertBox("poAlertMsg","red","Purchase order is not updated")})});$(document).on("click",".add-check-in",function(){var t=$("#po_id").val(),n={};n.shipping=0;n.tracking=[];n.items_barcodes=[];console.log(n);$.ajax({url:"/purchaseorders/updatepurchaseordercheckin/"+t,type:"post",contentType:"application/json",data:JSON.stringify(n),processData:!1}).always(function(n){console.log(n);n=="Success"&&alertInnerBox("poAlertMsg","green","Purchase order updated successfully");$(".poAlertMsg .alert").css({width:"100%","margin-top":"-15px"})})});if(total=$(".total_purchase_order_count").text(),total){if(currentPage=window.location.href+"/",currentPageNumber=1,window.location.href.indexOf("PurchaseOrdersCheckIn/Page")>-1&&(currentPage=window.location.href.split("Page/")[0],currentPageNumber=window.location.href.split("Page/")[1]),pagenumberData=pageNumbers(total,currentPageNumber,50),textData="",textData+=currentPageNumber<2?"<li class='page-item disabled'><a class='page-link' href='javascript:void(0)'>Previous<\/a><\/li>":"<li class='page-item'><a class='page-link' href="+currentPage+"Page/"+(parseInt(currentPageNumber)-1)+">Previous<\/a><\/li>",total<51)textData+="<li class='page-item active'><a class='page-link' href='javascript:void(0)'>1<\/a><\/li>";else for(i=0;i<pagenumberData.length;i++)pagenumberData[i]!=0&&(textData+=pagenumberData[i]==currentPageNumber?"<li class='page-item active'><a class='page-link' href='javascript:void(0)'>"+pagenumberData[i]+"<\/a><\/li>":pagenumberData[i]=="..."?"<li class='page-item disabled'><a class='page-link' href='javascript:void(0)'>...<\/a><\/li>":"<li class='page-item'><a class='page-link' href="+currentPage+"Page/"+pagenumberData[i]+">"+pagenumberData[i]+"<\/a><\/li>");textData+=currentPageNumber==pagenumberData[pagenumberData.length-1]?"<li class='page-item disabled'><a class='page-link' href='javascript:void(0)'>Next<\/a><\/li>":"<li class='page-item'><a class='page-link' href="+currentPage+"Page/"+(parseInt(currentPageNumber)+1)+">Next<\/a><\/li>";$(".custom_pagination .pagination").append(textData)}